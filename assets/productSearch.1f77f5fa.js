import{_ as E}from"./searchResult.9bf5ef40.js";import{a as G,u as T,_ as z,b as Q,c as Y}from"./globalFunctions.6c536278.js";import{_ as q}from"./SearchBtn.e8dd1aed.js";import{_ as A}from"./InputTwoGroupBox.b2d0888b.js";import{l as j,r as n,b as O,o as H,C as J,D as F,c as P,d as k,e,E as K,f as l,w as b,i as W,G as X,F as Z,g as ee,t as c}from"./index.acd8174a.js";/* empty css             */const ae={class:"productSearch"},te={class:"searchSetion"},oe={class:"d-flex"},se={class:"d-flex col-6"},ne={class:"d-flex col-6 justify-content-end"},ue={class:"Result"},re={class:"table table-hover m-0"},le=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"\u5546\u54C1\u8CA8\u865F"),e("th",null,"\u5546\u54C1\u540D\u7A31"),e("th",null,"\u5EAB\u5B58/\u6578\u91CF"),e("th",null,"\u5546\u54C1\u539F\u50F9"),e("th",null,"\u5546\u54C1\u7279\u50F9"),e("th",null,"\u5546\u54C1\u6210\u672C")])],-1),I=20,ge={__name:"productSearch",setup(ce){const v=G(),y=j(),$=T(),i=n(1),g=n([]),N=new Date,w=new Date(new Date().setDate(N.getDate()-7)),S=O(),_=n(!1);H(()=>{g.value=[w,N],a.StartDate=g.value[0],a.EndDate=g.value[1]}),J(()=>{S.IsLoading=!1});const x=n(!1),V=n(!1),a=F({Sku:"",ProductName:""}),d=F({Sku:"",ProductName:""}),D=n(0),h=n(0),u=n([]),m=n(!1),C=async s=>{m.value=!0,typeof s!="number"?s=i.value:i.value=s;const r=a.ProductName===""?"":`ProductName=${encodeURIComponent(a.ProductName)}`,f=`/Product/Information?${a.Sku===""?"":`Sku=${encodeURIComponent(a.Sku)}`}&${r}&Page=${s}&PageSize=20`;try{if(a.Sku===""&&a.ProductName===""){d.Sku="\u8ACB\u8F38\u5165\u81F3\u5C11\u4E00\u9805\u641C\u5C0B\u689D\u4EF6",d.ProductName="\u8ACB\u8F38\u5165\u81F3\u5C11\u4E00\u9805\u641C\u5C0B\u689D\u4EF6",m.value=!1,S.IsLoading=!1;return}if(d.Sku=v.isValidSku(a.Sku).errorMessage,d.ProductName=v.isValidProductName(a.ProductName).errorMessage,!v.isValidSku(a.Sku).isValid||!v.isValidProductName(a.ProductName).isValid){m.value=!1,S.IsLoading=!1,_.value=!0;return}const o=await $.getData(f);o.State===0?(u.value=[],u.value=o.Data.Data,D.value=o.Data.PageCount,h.value=o.Data.TotalCount):u.value=[],_.value=!0,m.value=!1,S.IsLoading=!1}catch(o){console.error("Error sending POST request:",o),o.response.request.status===401&&y.userLogout()}},L=s=>{a.Sku=s.trim()},M=s=>{a.ProductName=s.trim()};return(s,r)=>{const p=A,f=q,o=z,B=Q,R=Y,U=E;return P(),k("div",ae,[e("div",te,[e("form",{onSubmit:r[2]||(r[2]=K(t=>C(1),["prevent"]))},[e("div",oe,[e("div",se,[l(p,{inputType:"text",inputId:"searchForm.Sku",inputName:"searchForm.Sku","data-value":a.Sku,value:a.Sku,isFocused:x.value,label:"\u5546\u54C1\u8CA8\u865F",tabIndex:0,errorMessage:d.Sku,"onUpdate:modelValue":r[0]||(r[0]=t=>a.Sku=t),onGetReturnData:L},null,8,["data-value","value","isFocused","errorMessage"]),l(p,{inputType:"text",inputId:"searchForm.ProductName",inputName:"searchForm.ProductName","data-value":a.ProductName,value:a.ProductName,isFocused:V.value,label:"\u5546\u54C1\u540D\u7A31",tabIndex:1,errorMessage:d.ProductName,"onUpdate:modelValue":r[1]||(r[1]=t=>a.ProductName=t),onGetReturnData:M},null,8,["data-value","value","isFocused","errorMessage"])]),e("div",ne,[l(f,{searchLoading:m.value},null,8,["searchLoading"])])])],32)]),l(U,{searchedData:u.value,notSearchYet:_.value},{content:b(()=>[W(e("div",ue,[l(o,{class:"mt-0",currentPage:i.value,pageSize:I,searchedData:u.value,totalCount:h.value},null,8,["currentPage","searchedData","totalCount"]),l(B,null,{default:b(()=>[e("table",re,[le,e("tbody",null,[(P(!0),k(Z,null,ee(u.value,t=>(P(),k("tr",{key:t.CAID,class:""},[e("td",null,c(t.Id),1),e("td",null,c(t.Sku?t.Sku:"--"),1),e("td",null,c(t.ProductName?t.ProductName:"--"),1),e("td",null,c(t.UnlimitedQuantity===!0?"\u7121\u4E0A\u9650":t.Quantity?t.Quantity:"--"),1),e("td",null,c(t.Price?t.Price:"--"),1),e("td",null,c(t.PriceSale?t.PriceSale:"--"),1),e("td",null,c(t.Cost?t.Cost:"--"),1)]))),128))])])]),_:1}),l(o,{currentPage:i.value,pageSize:I,searchedData:u.value,totalCount:h.value},null,8,["currentPage","searchedData","totalCount"]),e("div",null,[l(R,{searchFun:C,currentPage:i.value,pageCount:D.value},null,8,["currentPage","pageCount"])])],512),[[X,u.value.length>0&&_.value]])]),_:1},8,["searchedData","notSearchYet"])])}}};export{ge as default};
