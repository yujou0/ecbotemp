import{_ as Q}from"./searchResult.0f084bf6.js";import{u as A,_ as Y,a as j,b as q}from"./globalFunctions.63dc697f.js";import{u as K,_ as H}from"./commandApiSearch.56febf79.js";import{_ as J}from"./SelectThreeGroupBox.e06fdbb7.js";import{_ as W}from"./InputTwoGroupBox.4b069e3c.js";import{l as X,r as i,b as Z,o as ee,B as te,C as T,m as ae,c as o,d as l,e as t,D as se,f as d,w as L,i as ne,E as re,F as _,g as f,n as P,t as r,h as M,u as c,N as oe}from"./index.18257174.js";/* empty css             */const le={class:"orderSearch"},ue={class:"searchSetion"},de={class:"d-flex"},ie={class:"d-flex col-6"},ce={class:"col-6"},he=t("p",{class:"advancedTitle"},"\u9032\u968E\u641C\u5C0B\u689D\u4EF6",-1),pe={class:"d-flex"},ve={class:"d-flex w-100 justify-content-between"},Se={class:"advancedTitle-content d-flex align-items-center"},me={class:"Result"},De={class:"table table-hover m-0"},ge=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"\u8A02\u55AE\u7DE8\u865F"),t("th",null,"\u8A02\u55AE\u5167\u5BB9"),t("th",null,"\u8A02\u55AE\u5EFA\u7ACB\u6642\u9593"),t("th",null,"\u8A02\u55AE\u72C0\u614B"),t("th",null,"\u4ED8\u6B3E\u72C0\u614B"),t("th",null,"\u51FA\u8CA8\u72C0\u614B"),t("th",null,"\u8A02\u55AE\u91D1\u984D"),t("th",null,"\u8A02\u8CFC\u4EBA"),t("th",null,"\u642D\u8ECA\u91D1\u72C0\u614B")])],-1),_e={key:0},fe=["onClick"],Pe={class:"ListOrderNumber"},Ce={key:0},be={key:1},G=20,Te={__name:"orderSearch",setup(ye){const u=A(),V=X();K();const p=i(1),C=i([]),k=new Date,x=new Date(new Date().setDate(k.getDate()-7)),D=Z(),g=i(!1);ee(()=>{C.value=[x,k],a.StartDate=C.value[0],a.EndDate=C.value[1]}),te(()=>{D.IsLoading=!1}),i(!1),i(!1);const a=T({Sku:"",ProductName:""}),v=T({Sku:"",ProductName:""}),I=i(0),b=i(0),S=i([]),m=i(!1),F=[{Id:1,Sku:"SKU123456",ProductName:"Product 1",Quantity:100,Price:1e3,PriceSale:900,Cost:700,UnlimitedQuantity:!1},{Id:2,Sku:"SKU123457",ProductName:"Product 2",Quantity:200,Price:2e3,PriceSale:1800,Cost:1500,UnlimitedQuantity:!0}],O=async s=>{m.value=!0,typeof s!="number"?s=p.value:p.value=s,a.ProductName===""||`${encodeURIComponent(a.ProductName)}`,a.Sku===""||`${encodeURIComponent(a.Sku)}`;try{if(a.Sku===""&&a.ProductName===""){v.Sku="\u8ACB\u8F38\u5165\u81F3\u5C11\u4E00\u9805\u641C\u5C0B\u689D\u4EF6",v.ProductName="\u8ACB\u8F38\u5165\u81F3\u5C11\u4E00\u9805\u641C\u5C0B\u689D\u4EF6",m.value=!1,D.IsLoading=!1;return}if(v.Sku=u.isValidSku(a.Sku).errorMessage,v.ProductName=u.isValidProductName(a.ProductName).errorMessage,!u.isValidSku(a.Sku).isValid||!u.isValidProductName(a.ProductName).isValid){m.value=!1,D.IsLoading=!1,g.value=!0;return}const n={State:0,Data:{Data:F,PageCount:1,TotalCount:F.length}};n.State===0&&(S.value=n.Data.Data,I.value=n.Data.PageCount,b.value=n.Data.TotalCount),g.value=!0,m.value=!1,D.IsLoading=!1}catch(n){console.error("Error sending POST request:",n),n.response.request.status===401&&V.userLogout()}};return(s,n)=>{const R=W,$=ae("custom-date-picker"),y=J,U=H,w=Y,B=j,E=q,z=Q;return o(),l("div",le,[t("div",ue,[t("form",{onSubmit:n[3]||(n[3]=se(e=>O(1),["prevent"]))},[t("div",de,[t("div",ie,[d(R,{inputType:"text",inputId:"searchForm.OrderNumber",inputName:"searchForm.OrderNumber","data-value":a.OrderNumber,value:a.OrderNumber,isFocused:s.isOrderNumberFocused,label:"\u8A02\u55AE\u7DE8\u865F",tabIndex:1,"onUpdate:modelValue":n[0]||(n[0]=e=>a.OrderNumber=e),onGetReturnData:s.getOrderNumberData},null,8,["data-value","value","isFocused","onGetReturnData"]),d(R,{inputType:"phone",inputId:"searchForm.RegisterPhone",inputName:"searchForm.RegisterPhone","data-value":a.RegisterPhone,value:a.RegisterPhone,isFocused:s.isPhoneFocused,label:"\u8A3B\u518A\u9580\u865F",tabIndex:1,errorMessage:v.RegisterPhone,"onUpdate:modelValue":n[1]||(n[1]=e=>a.RegisterPhone=e),onGetReturnData:s.getPhoneData},null,8,["data-value","value","isFocused","errorMessage","onGetReturnData"])]),t("div",ce,[d($,{selectedValue:s.selectedDates,"onUpdate:selectedValue":n[2]||(n[2]=e=>s.selectedDates=e),datepicketStatus:s.datepicketStatus,label:"\u8A02\u55AE\u5EFA\u7ACB\u6642\u9593 (\u9650\u641C\u5C0B 92 \u5929\u5167\u5340\u9593)",onGetReturnData:s.getDateData},null,8,["selectedValue","datepicketStatus","onGetReturnData"])])]),he,t("div",pe,[t("div",ve,[t("div",Se,[d(y,{options:["\u8ACB\u9078\u64C7\u72C0\u614B","\u5168\u90E8","\u8655\u7406\u4E2D","\u5DF2\u522A\u9664","\u5DF2\u78BA\u8A8D","\u5DF2\u5B8C\u6210","\u5DF2\u53D6\u6D88"],inputType:"text",inputId:"searchForm.orderStatus",inputName:"searchForm.orderStatus","data-value":a.orderStatus,value:a.orderStatus,label:"\u8A02\u55AE\u72C0\u614B",disabledChoice:"\u8ACB\u9078\u64C7\u72C0\u614B",errorMessage:"",tabIndex:"1",onGetReturnData:s.getorderStatusData},null,8,["data-value","value","onGetReturnData"]),d(y,{options:["\u8ACB\u9078\u64C7\u72C0\u614B","\u5168\u90E8","\u5099\u8CA8\u4E2D","\u767C\u8CA8\u4E2D","\u5DF2\u767C\u8CA8","\u5DF2\u5230\u9054","\u5DF2\u53D6\u8CA8","\u9000\u8CA8\u4E2D","\u5DF2\u9000\u8CA8"],inputType:"text",inputId:"searchForm.DeliveryStatus",inputName:"searchForm.DeliveryStatus","data-value":a.DeliveryStatus,value:a.DeliveryStatus,label:"\u51FA\u8CA8\u72C0\u614B",disabledChoice:"\u8ACB\u9078\u64C7\u72C0\u614B",errorMessage:"",tabIndex:"1",onGetReturnData:s.getDeliveryStatusData},null,8,["data-value","value","onGetReturnData"]),d(y,{options:["\u8ACB\u9078\u64C7\u72C0\u614B","\u5168\u90E8","\u672A\u4ED8\u6B3E","\u5DF2\u4ED8\u6B3E","\u9000\u6B3E\u4E2D","\u5DF2\u9000\u6B3E","\u5DF2\u90E8\u5206\u9000\u6B3E"],inputType:"text",inputId:"searchForm.PaymentStatus",inputName:"searchForm.PaymentStatus","data-value":a.PaymentStatus,value:a.PaymentStatus,label:"\u4ED8\u6B3E\u72C0\u614B",disabledChoice:"\u8ACB\u9078\u64C7\u72C0\u614B",errorMessage:"",tabIndex:"1",onGetReturnData:s.getPaymentStatusData},null,8,["data-value","value","onGetReturnData"])]),d(U,{searchLoading:m.value},null,8,["searchLoading"])])])],32)]),d(z,{searchedData:S.value,notSearchYet:g.value},{content:L(()=>[ne(t("div",me,[d(w,{class:"mt-0",currentPage:p.value,pageSize:G,searchedData:S.value,totalCount:b.value},null,8,["currentPage","searchedData","totalCount"]),d(B,null,{default:L(()=>[t("table",De,[ge,t("tbody",null,[(o(!0),l(_,null,f(s.showData,e=>(o(),l("tr",{key:e.ID,class:P({trIsChild:e.isChild})},[t("td",null,[e.isChild?M("",!0):(o(),l("span",_e,r(e.Id),1))]),t("td",null,[t("div",{class:P(["d-flex align-items-center",{trIsFirstChild:e.isFirstChild,trIsLastChild:e.isLastChild,trIsMiddleChild:!e.isFirstChild&&!e.isLastChild}])},[e.hasList?(o(),l("button",{key:0,class:P(["d-flex justify-content-center align-items-center",[{"order-expand-btn":!e.showDetails},{"order-expanded-btn":e.showDetails}]]),onClick:h=>s.toggleDetails(e,e.Id)},[t("i",{class:P([{"bi-plus":!e.showDetails},{"bi bi-dash":e.showDetails},{"rotate-90":!e.showDetails},{"rotate-180":e.showDetails}])},null,2)],10,fe)):M("",!0),t("div",Pe,r(e.OrderNumber?e.OrderNumber:"--"),1)],2)]),t("td",null,r(e.OrderContent?e.OrderContent:"--"),1),t("td",null,r(e.OrderCreateTime?c(u).formatDate(e.OrderCreateTime):"--"),1),t("td",null,r(e.OrderStatus?c(u).OrderStatusMap[e.OrderStatus]:"--"),1),t("td",null,r(e.PaymentStatus?c(u).PaymentStatusMap[e.PaymentStatus]:"--"),1),t("td",null,r(e.DeliveryStatus?c(u).DeliveryStatusMap[e.DeliveryStatus]:"--"),1),t("td",null,r(e.OrderTotalSum?e.OrderTotalSum:"--"),1),t("td",null,r(e.OrderPlacer?e.OrderPlacer:"--"),1),t("td",null,[oe(r(e.HasTicket?"":"--")+" ",1),!e.hasList&&e.List&&e.List.length==1&&e.List[0].TicketInsertInfo.length>0?(o(),l("div",Ce,[(o(!0),l(_,null,f(e.List,h=>(o(),l("div",{key:h},[(o(!0),l(_,null,f(h.TicketInsertInfo,N=>(o(),l("p",{key:N},r(N.AID)+" / "+r(c(u).TicketStatusMap[c(u).NumericStatusMap[N.Status]]),1))),128))]))),128))])):(o(),l("div",be,[(o(!0),l(_,null,f(e.TicketInsertInfo,h=>(o(),l("p",{key:h},r(h.AID)+" / "+r(c(u).TicketStatusMap[c(u).NumericStatusMap[h.Status]]),1))),128))]))])],2))),128))])])]),_:1}),d(w,{currentPage:p.value,pageSize:G,searchedData:S.value,totalCount:b.value},null,8,["currentPage","searchedData","totalCount"]),t("div",null,[d(E,{searchFun:O,currentPage:p.value,pageCount:I.value},null,8,["currentPage","pageCount"])])],512),[[re,S.value.length>0&&g.value]])]),_:1},8,["searchedData","notSearchYet"])])}}};export{Te as default};
