import{_ as G}from"./searchResult.ff3f8249.js";import{u as R,_ as z,a as K,b as T}from"./globalFunctions.157908aa.js";import{u as Y,_ as j}from"./commandApiSearch.1a4f21d3.js";import{_ as q}from"./InputTwoGroupBox.30d0fa1c.js";import{J as A,l as J,r as u,b as H,o as O,B as W,C as w,c as y,d as C,e,D as X,f as n,w as M,i as Z,E as ee,F as te,g as ae,t as r,K as oe,L as se}from"./index.68f17c6c.js";/* empty css             */const ue=p=>(oe("data-v-208edc50"),p=p(),se(),p),ne={class:"productSearch"},re={class:"searchSetion"},le={class:"d-flex"},ce={class:"d-flex col-6"},de={class:"d-flex col-6 justify-content-end"},ie={class:"Result"},_e={class:"table table-hover m-0"},me=ue(()=>e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"\u5546\u54C1\u8CA8\u865F"),e("th",null,"\u5546\u54C1\u540D\u7A31"),e("th",null,"\u5EAB\u5B58/\u6578\u91CF"),e("th",null,"\u5546\u54C1\u539F\u50F9"),e("th",null,"\u5546\u54C1\u7279\u50F9"),e("th",null,"\u5546\u54C1\u6210\u672C")])],-1)),m=20,pe={__name:"productSearch",setup(p){const v=R(),L=J();Y();const d=u(1),P=u([]),F=new Date,V=new Date(new Date().setDate(F.getDate()-7)),S=H(),h=u(!1);O(()=>{P.value=[V,F],t.StartDate=P.value[0],t.EndDate=P.value[1]}),W(()=>{S.IsLoading=!1});const U=u(!1),B=u(!1),t=w({Sku:"",ProductName:""}),l=w({Sku:"",ProductName:""}),x=u(0),k=u(0),c=u([]),i=u(!1),Q=[{Id:1,Sku:"SKU123456",ProductName:"Product 1",Quantity:100,Price:1e3,PriceSale:900,Cost:700,UnlimitedQuantity:!1},{Id:2,Sku:"SKU123457",ProductName:"Product 2",Quantity:200,Price:2e3,PriceSale:1800,Cost:1500,UnlimitedQuantity:!0}],b=async s=>{i.value=!0,typeof s!="number"?s=d.value:d.value=s;try{if(t.Sku===""&&t.ProductName===""){l.Sku="\u8ACB\u8F38\u5165\u81F3\u5C11\u4E00\u9805\u641C\u5C0B\u689D\u4EF6",l.ProductName="\u8ACB\u8F38\u5165\u81F3\u5C11\u4E00\u9805\u641C\u5C0B\u689D\u4EF6",i.value=!1,S.IsLoading=!1;return}if(l.Sku=v.isValidSku(t.Sku).errorMessage,l.ProductName=v.isValidProductName(t.ProductName).errorMessage,!v.isValidSku(t.Sku).isValid||!v.isValidProductName(t.ProductName).isValid){i.value=!1,S.IsLoading=!1,h.value=!0;return}const o=Q.filter(f=>{const D=t.Sku===""||f.Sku.includes(t.Sku),I=t.ProductName===""||f.ProductName.includes(t.ProductName);return D&&I}),_=(s-1)*m,N=_+m,g=o.slice(_,N);c.value=g,x.value=Math.ceil(o.length/m),k.value=o.length,h.value=!0,i.value=!1,S.IsLoading=!1}catch(o){console.error("Error:",o),o.response.request.status===401&&L.userLogout()}},$=s=>{t.Sku=s.trim()},E=s=>{t.ProductName=s.trim()};return(s,o)=>{const _=q,N=j,g=z,f=K,D=T,I=G;return y(),C("div",ne,[e("div",re,[e("form",{onSubmit:o[2]||(o[2]=X(a=>b(1),["prevent"]))},[e("div",le,[e("div",ce,[n(_,{inputType:"text",inputId:"searchForm.Sku",inputName:"searchForm.Sku","data-value":t.Sku,value:t.Sku,isFocused:U.value,label:"\u5546\u54C1\u8CA8\u865F",tabIndex:0,errorMessage:l.Sku,"onUpdate:modelValue":o[0]||(o[0]=a=>t.Sku=a),onGetReturnData:$},null,8,["data-value","value","isFocused","errorMessage"]),n(_,{inputType:"text",inputId:"searchForm.ProductName",inputName:"searchForm.ProductName","data-value":t.ProductName,value:t.ProductName,isFocused:B.value,label:"\u5546\u54C1\u540D\u7A31",tabIndex:1,errorMessage:l.ProductName,"onUpdate:modelValue":o[1]||(o[1]=a=>t.ProductName=a),onGetReturnData:E},null,8,["data-value","value","isFocused","errorMessage"])]),e("div",de,[n(N,{searchLoading:i.value},null,8,["searchLoading"])])])],32)]),n(I,{searchedData:c.value,notSearchYet:h.value},{content:M(()=>[Z(e("div",ie,[n(g,{class:"mt-0",currentPage:d.value,pageSize:m,searchedData:c.value,totalCount:k.value},null,8,["currentPage","searchedData","totalCount"]),n(f,null,{default:M(()=>[e("table",_e,[me,e("tbody",null,[(y(!0),C(te,null,ae(c.value,a=>(y(),C("tr",{key:a.Id,class:""},[e("td",null,r(a.Id),1),e("td",null,r(a.Sku?a.Sku:"--"),1),e("td",null,r(a.ProductName?a.ProductName:"--"),1),e("td",null,r(a.UnlimitedQuantity===!0?"\u7121\u4E0A\u9650":a.Quantity?a.Quantity:"--"),1),e("td",null,r(a.Price?a.Price:"--"),1),e("td",null,r(a.PriceSale?a.PriceSale:"--"),1),e("td",null,r(a.Cost?a.Cost:"--"),1)]))),128))])])]),_:1}),n(g,{currentPage:d.value,pageSize:m,searchedData:c.value,totalCount:k.value},null,8,["currentPage","searchedData","totalCount"]),e("div",null,[n(D,{searchFun:b,currentPage:d.value,pageCount:x.value},null,8,["currentPage","pageCount"])])],512),[[ee,c.value.length>0&&h.value]])]),_:1},8,["searchedData","notSearchYet"])])}}},ke=A(pe,[["__scopeId","data-v-208edc50"]]);export{ke as default};
